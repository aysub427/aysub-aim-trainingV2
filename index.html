<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>AIM & DODGE TRAINER</title>
<style>
  body { margin:0; background:#111; color:white; font-family:Arial; overflow:hidden; }
  #game { position:relative; width:100vw; height:100vh; }
  .enemy, .ping { position:absolute; border-radius:50%; cursor:pointer; }
  .enemy { width:30px; height:30px; background:red; }
  .ping { width:20px; height:20px; background:yellow; }
  #ui { position:fixed; top:10px; left:10px; font-size:16px; }
  #blind { position:fixed; inset:0; background:black; display:none; z-index:10; }
  #weapon { position:fixed; bottom:-10px; right:20px; width:320px; height:180px;
            background:linear-gradient(90deg,#333,#111); clip-path: polygon(0 60%,100% 80%,100% 100%,0 100%); z-index:5;}
  #crosshair { position:fixed; top:50%; left:50%; width:6px; height:6px; background:white;
              transform:translate(-50%,-50%); z-index:6; }
</style>
</head>
<body>

<div id="ui"></div>
<div id="game"></div>
<div id="blind"></div>
<div id="weapon"></div>
<div id="crosshair"></div>

<script>
const game = document.getElementById("game");
const ui = document.getElementById("ui");
const blind = document.getElementById("blind");

let tier = "GOLD"; // í…ŒìŠ¤íŠ¸ìš©, ë‚˜ì¤‘ì— ì„ íƒ ê°€ëŠ¥
let kills = 0;
let dodged = 0;
let goalKills = [25,50,100][Math.floor(Math.random()*3)];
let goalDodges = [10,20,30][Math.floor(Math.random()*3)];
let timeLimits = { "IRON":60, "BRONZE":50, "SILVER":45, "GOLD":40, "PLATINUM":35, "IMMORTAL":30, "RADIANT":25 };
let timeLeft = timeLimits[tier];

// ì—…ë°ì´íŠ¸ UI
function updateUI(){
  ui.innerHTML = `ğŸ¯ Kills: ${kills}/${goalKills}<br>
                  ğŸŸ¡ Dodges: ${dodged}/${goalDodges}<br>
                  â³ Time Left: ${timeLeft}s<br>
                  ğŸ† Tier: ${tier}`;
}

// ëœë¤ ìœ„ì¹˜
function randomPos() {
  return { x: Math.random() * (window.innerWidth - 40), y: Math.random() * (window.innerHeight - 40) };
}

// ì  ìƒì„± (í—¤ë“œ/ë°”ë””)
function spawnEnemy(count=1){
  for(let i=0;i<count;i++){
    const e = document.createElement("div");
    e.className="enemy";
    e.dataset.hp = 4;
    const p=randomPos();
    e.style.left=p.x+"px";
    e.style.top=p.y+"px";

    e.addEventListener("click", (event)=>{
      const rect = e.getBoundingClientRect();
      const clickY = event.clientY - rect.top;
      const height = rect.height;
      if(clickY < height*0.3){ // í—¤ë“œ
        kills++;
        e.remove();
        updateUI();
        checkGoal();
        return;
      }
      // ë°”ë””
      e.dataset.hp--;
      e.style.background="#aa0000";
      if(e.dataset.hp <=0){
        kills++;
        e.remove();
      }
      updateUI();
      checkGoal();
    });

    game.appendChild(e);
    if(tier==="RADIANT") playFootstep(p.x);
  }
}

// ì‚¥ ìƒì„±
function spawnPing(){
  const p = document.createElement("div");
  p.className="ping";
  const pos=randomPos();
  p.style.left=pos.x+"px";
  p.style.top=pos.y+"px";

  let speed = 1 + Math.random()*4;
  let dx = Math.random()>0.5 ? speed : -speed;
  let dy = Math.random()>0.5 ? speed : -speed;

  const move = setInterval(()=>{
    p.style.left=(p.offsetLeft+dx)+"px";
    p.style.top=(p.offsetTop+dy)+"px";

    if(p.offsetLeft<0||p.offsetTop<0||p.offsetLeft>window.innerWidth||p.offsetTop>window.innerHeight){
      dodged++;
      p.remove();
      clearInterval(move);
      updateUI();
      checkGoal();
    }
  },16);

  p.onclick=()=>{
    p.remove();
    clearInterval(move);
  };

  game.appendChild(p);
}

// ë°œì†Œë¦¬
function playFootstep(x){
  const audio=new Audio("https://actions.google.com/sounds/v1/foley/footsteps_on_wood.ogg");
  audio.volume=0.5;
  audio.pan = x < window.innerWidth/2 ? -1:1;
  audio.play();
}

// ëª©í‘œ ì²´í¬
function checkGoal(){
  if(kills>=goalKills && dodged>=goalDodges){
    clearInterval(timerInterval);
    gameOver(true);
  }
}

// ê²Œì„ ì¢…ë£Œ
function gameOver(success){
  if(success){ alert("ğŸ‰ ì„±ê³µ! ë‹¨ê³„ í´ë¦¬ì–´!"); }
  else { alert("ğŸ’€ ì‹œê°„ ì´ˆê³¼! ì‹¤íŒ¨!"); }
  location.reload();
}

// ë°´ë‹¬ ë‹¨ë°œ ë°œì‚¬
document.addEventListener("click", ()=>{
  shootVandal();
});
function shootVandal(){
  const gun = new Audio("https://actions.google.com/sounds/v1/impacts/metal_thud_and_rattle.ogg");
  gun.volume=0.3;
  gun.play();
}

// ê²Œì„ ì‹œì‘
function start(){
  updateUI();
  // ë ˆë””ì–¸íŠ¸ ë¸”ë¼ì¸ë“œ
  if(tier==="RADIANT"){ blind.style.display="block"; }
  setInterval(()=>spawnEnemy(Math.random()>0.7?2:1),1000);
  setInterval(()=>spawnPing(),800);
}

start();

// ì‹œê°„ ì œí•œ
const timerInterval = setInterval(()=>{
  timeLeft--;
  updateUI();
  if(timeLeft<=0){ clearInterval(timerInterval); gameOver(false); }
},1000);

</script>
</body>
</html>
